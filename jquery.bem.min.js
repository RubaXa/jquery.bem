/*!
 * jQuery BEM
 * https://github.com/RubaXa/jquery.bem#zen
 *
 * @author	RubaXa	<trash@rubaxa.org>
 */
(function(q,n,f,h){var j=function(){},r=[].slice,o=0,k=q.clasess={},i={},s=/\b([a-z\d-]+)\b/ig,p=/\s+/g,l=function(){this.__lego.apply(this,arguments)},t=!0,u={focusin:["focus",1],focusout:["focus",0],mouseup:["press",0],mousedown:["press",1],mouseover:["hover",1],mouseenter:["hover",1],mouseleave:["hover",0]},x=function(b,a){return f.isFunction(b)&&f.isFunction(a)?function(){var c=this.parent,d;this.parent=a;d=b.apply(this,arguments);this.parent=c;return d}:b},v=function(b,a,c){for(var d in a)b[d]=
x(a[d],c[d])},m=function(b,a,c){"string"==typeof a&&(a=b[a]);c===h&&(c=[]);return a===h?a:a.bind?a.bind.apply(a,[b].concat(c)):function(){return a.apply(b,c.concat(r.call(arguments)))}};f.event.special.leftclick={setup:function(){f.event.add(this,"click",f.event.special.leftclick.handler)},teardown:function(){f.event.remove(this,"click")},handler:function(b){!b.button&&(!b.metaKey&&!b.shiftKey&&!b.altKey&&!b.ctrlKey)&&(b.type="leftclick",f.event.handle.apply(this,arguments),b.type="click")}};l.extend=
function(b,a,c){var d,e=this.fn,g=function(){this.__lego.apply(this,arguments)};for(d in this)this.hasOwnProperty(d)&&(g[d]=this[d]);j.prototype=e;g.fn=g.prototype=new j;g.fn.__self=g;g._name=b;if(c)for(d in c)g[d]=c[d];a&&(a.onMod&&(v(g.fn.onMod,a.onMod,e.onMod),delete a.onMod),v(g.fn,a,e));return g};f.extend(l,{_body:"body",_name:h,_events:"mouseenter mouseleave mouseup mousedown focusin focusout",_onEvent:function(b){this.find(b.currentTarget)._onEvent(b)},$win:f(q),$doc:f(n),events:{},init:function(b,
a){var c=[].concat(this._events),d=this.find(b),e,g;a&&d._onEvent(a);if(c[0]!==h){delete this._events;e={};f.each(this.events,function(a,b){a=f.trim(a).toLowerCase().split(p);for(g=0;g<a.length;g++)e[a[g]]=b,c.push(a[g])});this.events=e;c=c.join(" ").split(p);for(e=c.length;e--;)for(g=e;g--;)if(c[e]==c[g]){c.splice(e,1);break}f(this.getBody()).on(c.join(" "),"."+this.getName(),m(this,"_onEvent"))}},getBody:function(){return this._body},mod:function(b,a,c){this.find(b).mod(a,c)},find:function(b){var a=
i[b.getAttribute("bemId")];a===h&&(a=new this(b),i[a.getId()]=a);return a},getName:function(){return this._name}});l.fn=l.prototype={onMod:{_:j,"*":j},__lego:function(b){this.name=this.__self.getName();this.$el=f(b);this.el=this.$el[0];this.uniqId=++f.guid;this._mods={};this.$attr("bemId",this.uniqId);this.role&&this.$attr("role",this.role);this.__self.attrs&&this.$attr(this.__self.attrs);this.onMod._.call(this);for(var a=RegExp("\\s"+this.name+"_([a-zA-Z0-9-]+)(_[a-zA-Z0-9-]+)?\\s","g"),c=" "+this.el.className+
" ",b=[],d;d=a.exec(c);)b.push(d);for(a=b.length;a--;)this._mods[b[a][1]]=c=b[a][2]?b[a][2].substr(1):!0,this._emitMod(b[a][1],c);this._init()},_init:j,eventNS:function(b){return(b||"")+"."+this.uniqId},_onEvent:function(b){var a=b.type,c=u[a],a=this.__self.events[a];c!==h&&this.mod(c[0],c[1]);a!==h&&("string"==typeof a&&(a=this[a]),a.call(this,b))},_emitMod:function(b,a,c){var d;d=this.onMod;var e=d["*"].call(this,b,a);if(!1!==e&&(d=d[b],!1===d?e=!1:d&&("string"==typeof d?e=this[d](a,b):
"object"===typeof d?(d["*"]!==h&&(e=d["*"].call(this,a,b)),!1!==e&&d["string"===typeof a?a:a?"yes":""]!==h&&d[a].call(this,a,b)):e=d.call(this,a,b)),e&&!0!==c&&!1===this._emitMod(b+(a?"_yes":"_no"),a,!0)))e=!1;return e},getId:function(){return this.uniqId},proxy:function(b){return m(this,b,r.call(arguments,1))},_modClassName:function(b,a){return this.name+"_"+b+(a&&"string"===typeof a?"_"+a:"")},mod:function(b,a){var b=f.trim(b).split(p),c=this.el,d=b.length,e,g=this._mods,j,i=" "+c.className+" ";
if(a===h)return g[b];for(;d--;)e=b[d],g[e]!=a&&!1!==this._emitMod(e,a)&&(j=this._modClassName(e,g[e]),i=i.replace(" "+j+" "," "),a&&(i+=this._modClassName(e,a)+" "),g[e]=a);c.className=f.trim(i);return this},hasMod:function(b,a){var c=this._mods[b];return a===h?!!c:c==a},addMod:function(b,a){return this.mod(b,a?a:t)},delMod:function(b,a){return this.mod(b,a?a:!1)},toggleMod:function(b,a){return this.mod(b,a===h?!this.hasMod(b):a)},$:function(b){return this.$el.find(b)},$attr:function(b,a,c){var d=
this,e=d.$el;c!==h||"object"==typeof a?e=e.find(b):(c=a,a=b);null===c?e.removeAttr(a):"string"!=typeof a||c!==h?e.attr(a,c):d=e.attr(a);return d},$aria:function(b,a){var c=this,d;"object"==f.type(b)||a!==h?(d={},"string"==f.type(b)?d["aria-"+b]=a:f.each(b,function(a,b){d["aria-"+a]=b}),c.$attr(d)):c=c.$attr("aria-"+b);return c},$closest:function(b){return this.$el.closest(b)},one:function(b,a,c){c===h&&(c=a,a=h);this.$el.one(this.eventNS(b),a,m(this,c));return this},hasOn:function(b){var a=
this.$el.data("events"),c=this.eventNS(b).split("."),d=!1,b=c.splice(0,1);if(a=a&&a[b])if(c.length){c.sort();c=c.join(".");for(b=a.length;b--;)if(a[b].namespace==c){d=!0;break}}else d=!0;return d},on:function(b,a,c){c===h&&(c=a,a=h);this.$el.on(this.eventNS(b),a,m(this,c));return this},off:function(b,a,c){this.$el.off(this.eventNS(b),a,m(this,c));return this},trigger:function(b,a){this.$el.trigger(b,a);return this},isDisabled:function(){return this.mod("disabled")},inDOM:function(){var b=
this.el;return b&&(b=b.parentNode)&&0<b.nodeType},destroy:function(b){this.destroy=j;var a=this.__self;this.off();this.$el.removeAttr("bemId");a.$win.add(a.$doc).off("."+this.uniqId);b&&this.$el.remove();delete i[this.getId()];for(var c in this)this.hasOwnProperty(c)&&delete this[c]}};var w=function(b){for(var a=b.target,c,d,e;n!==a;){c=a.className.match(s);if(null!==c)for(e=c.length;e--;)d=k[c[e]],d!==h&&!d.active&&(o--,d.active=!0,d.init(a,b));a=a.parentNode}o||f(n).off("mouseover mousedown focusin",
w)};f.bem=function(b,a,c){if("yes"===b)t="yes",f.each(u,function(a,b){b[1]=b[1]?"yes":0});else{!o&&!0!=b[0]&&(o++,f(n).on("mouseover mousedown focusin",w));var d=k[b[0]]||l,b=b[1];k[b]=d.extend(b,a,c)}};f.behaviorGarbageCollect=function(b){var a,c;for(a in i)c=i[a],!c.inDOM()&&(!f.isFunction(b)||!1!==b(c,a))&&c.destroy()};f.fn.bem=function(b,a){"add"==b?this.addClass(a).each(function(){k[a].init(this)}):"clear"===b?this.find("[bemId]").andSelf().each(function(a,b){(a=i[b.getAttribute("bemId")])!==
h&&a.destroy()}):this.each(function(){var c=this.className.match(s),d,e;if(null!==c)for(d=c.length;d--;)(e=k[c[d]])&&e.mod(this,b,a)});return this}})(window,document,jQuery);window.ajs&&ajs.loaded&&ajs.loaded("{jquery.bem}jquery.bem.min");"function"===typeof define&&define.amd&&define("jquery.bem",[],function(){return window["jquery.bem"]||{}});
