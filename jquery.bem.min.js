/*!
 * jQuery BEM
 * https://github.com/RubaXa/jquery.bem#readme
 *
 * @author	RubaXa	<trash@rubaxa.org>
 * @build	bem/jquery.bem.control bem/jquery.bem.list bem/jquery.bem.dropdown bem/jquery.bem.select bem/jquery.bem.filter
 */
(function(h,l,g,a){var c=function(){},f=g({}),b=[].slice,d=0,i=h.clasess={},j={},n=/\b([a-z\d-]+(?:__[a-z\d-]+)*)\b/ig,s=/\s+/g,o=function(){this.__lego.apply(this,arguments)},r={hover:"mouseenter mouseleave",press:"mouseup mousedown",focus:"focusin focusout"},t={focusin:["focus",!0],focusout:["focus",!1],mouseup:["press",!1],mousedown:["press",!0],mouseover:["hover",!0],mouseenter:["hover",!0],mouseleave:["hover",!1]},x=function(e,a,k,b){e=g.trim(e).split(s);for(b=e.length;b--;)a.call(k,e[b],b)},
C=function(e,a){return g.isFunction(e)&&g.isFunction(a)&&!e.fn?function(){var k=this.parent,b;this.parent=a;b=e.apply(this,arguments);this.parent=k;return b}:e},q=function(e,a,k){for(var b in a)e[b]=k?C(a[b],k[b]):a[b]},u=function(e,m,k){"string"==typeof m&&(m=e[m]);k===a&&(k=[]);return m===a?m:m.bind?m.bind.apply(m,[e].concat(k)):function(){return m.apply(e,k.concat(b.call(arguments)))}},v=function(e,m,k){var b=j[e.getAttribute("bemId")],p=" "+e.className+" ";if(b===a){if(m===a||!~p.indexOf(" "+
m.getName()+" ")){var p=p.match(n),d,c;if(null!==p)for(d=p.length;d--;)if(c=i[p[d]])b=c.init(e)}if(b===a&&(k in i||m))b=(i[k]||m).init(e,a,k)}return b},y=function(){return!1},w=[],z,A;g.event.special.leftclick={setup:function(){g.event.add(this,"click",g.event.special.leftclick.handler)},teardown:function(){g.event.remove(this,"click")},handler:function(e){!e.button&&(!e.metaKey&&!e.shiftKey&&!e.altKey&&!e.ctrlKey)&&(e.type="leftclick",g.event.handle.apply(this,arguments),e.type="click")}};g.expr[":"].isVisible=
function(e){return 5<e.offsetHeight};g.is=function(e,a){f[0]=e;return f.is(a)};g.fn.hasOn=function(e,a){var k=this.data("events"),b=e.split("."),p,d=!1,e=b.splice(0,1);if(k=k&&k[e])if(b.length||a){b.sort();b=b.join(".");for(p=k.length;p--;)if(!b||~k[p].namespace.indexOf(b)){d=a?a==k[p].handler:!0;break}}else d=!0;return d};g.fn.isClosest=function(e,a){return 0<this.closest(e,a).length};o.extend=function(e,a,k){var b,d=this,i={},j=d.fn,f=function(){this.__lego.apply(this,arguments)};for(b in this)d.hasOwnProperty(b)&&
(f[b]=d[b]);f.lazy=f.cache=f.forced=f.inactive=!1;c.prototype=j;f.fn=f.prototype=new c;f.fn.self=f;f._name=e;k&&(g.each(["events","live"],function(e,a){q(f[a]={},d[a]);q(f[a],k[a]||{},d[a]);delete k[a]}),q(f,k));q(i,j.onMod);a&&(q(i,a.onMod||{},j.onMod),g.each(i,function(e,a){delete i[e];for(var e=e.split(s),m=0;m<e.length;m++)i[e[m]]=a}),delete a.onMod,q(f.fn,a,j));f.fn.onMod=i;return f};g.extend(o,{_onEvent:function(e){this.find(e.currentTarget)._onEvent(e)},$win:g(h),$doc:g(l),lazy:!1,forced:!1,
inactive:!0,mods:"",live:{},events:{},init:function(e,a,k){var b=[],d,c;if(!this.active)if(this.active=!this.inactive,this.mods&&g.each(this.mods.split(s),function(e,a){b.push(r[a]||"")}),d={},g.each(this.live,function(e,a){e=g.trim(e).toLowerCase().split(s);for(c=e.length;c--;)d[e[c]]=a,-1==g.inArray(e[c],b)&&b.push(e[c])}),this.live=d,this.active)g(this.getBody()).on(b.join(" "),"."+this.getName(),u(this,"_onEvent"));else if(e)g(e).on(b.join(" "),u(this,"_onEvent"));if(e&&!e.getAttribute("bemId"))return e=
new this(e,k),a&&(k=a.type,e._onEvent(a),"mouseover"==k&&(a.type="mouseenter",e._onEvent(a)),a.type=k),e},getBody:function(){return this._body||this.$doc},find:function(e){return v(e,this)},getName:function(){return this._name},override:function(e,a){if(e){var b=this.fn;e.onMod&&(q(b.onMod,e.onMod,b.onMod),delete e.onMod);q(b,e,b)}a&&q(this,a,this)}});o.fn=o.prototype={self:o,onMod:{"*":c},boundAll:"",debounceAll:"",cache:!1,__lego:function(e,a){g.extend(this,(e.onclick||g.noop)()||{});this.name=
a||this.self.getName();this.cache=this.self.cache;this.$el=g(e).removeAttr("onclick");this.el=this.$el[0];this.uniqId=++g.guid;this._mods={};this._cache={};j[this.uniqId]=this;var b=this.self.attrs||{};b.bemId=this.uniqId;this.role&&(b.role=this.role);this.$attr(b);this.self.lazy?this.debounce("ready")():this.ready()},ready:function(){this.ready=function(){return this};for(var e=this.boundAll,a=this.debounceAll,b=RegExp("\\b"+this.name+"_([a-zA-Z0-9-]+)(_[a-zA-Z0-9-]+)?\\b","g"),d=this.el.className,
c=[],f;f=b.exec(d);)c.push(f);b=c.length;for(this._silent=!0;b--;)this._mods[c[b][1]]=d=c[b][2]?c[b][2].substr(1):!0,this._emitMod(c[b][1],d);this._silent=!1;x(e+" _onFocusOut",function(e){this[e]=this.bound(e)},this);x(a,function(e){e=e.split(":");this[e[0]]=this.debounce(e[0],e[1])},this);this._init();this._onEvent(!0);return this},_init:c,_qevents:[],eventNS:function(e){return(e||"").split(s).join("."+this.uniqId+" ")+"."+this.uniqId},_onEvent:function(e){if(!0===e)for(this._onEvent=this.__onEvent;e=
this._qevents.shift();)this._onEvent(e);else this._qevents.push(e)},__onEvent:function(e){var b=e.type,k=t[b],d=this.self,c=d.live[b],f;if(0===b.indexOf("focus"))if(clearTimeout(this._focusOutId),"focusin"==b){if(this.focused)return;this.focused=!0}else if(this.focused){this._focusEvent=e;this._focusOutId=setTimeout(this._onFocusOut,1);return}c!==a&&("string"==typeof c&&(c=this[c]),f=c.call(this,e));!1!==f&&(k!==a&&~d.mods.indexOf(k[0]))&&this.mod(k[0],k[1])},_onFocusOut:function(){g(l.activeElement).closest(this.el,
this.$el)[0]||(this.focused=!1,this._onEvent(this._focusEvent))},_emitMod:function(e,b,k){var d;d=this.onMod;var c=k||d["*"].call(this,e,b),f="string"===typeof b,i,g;if(!1!==c){d=d[e];if(!1===d)c=!1;else if(d)if(i=typeof d,"string"===i)c=this[d](b,e);else if("object"===i){if(d["*"]!==a&&(c=d["*"].call(this,b,e)),!1!==c&&d[g=f?b:b?"yes":""]!==a)c=d[g].call(this,b,e)}else c=d.call(this,b,e);if(!1!==c&&!0!==k&&!1===this._emitMod(e+"_"+(f?b:b?"yes":"no"),b,!0))c=!1}return c},getId:function(){return this.uniqId},
bound:function(e){return u(this,e,b.call(arguments,1))},_modClassName:function(e,a){return this.name+"_"+e+(a&&"string"===typeof a?"_"+a:"")},mod:function(e,b){var e=g.trim(e).split(s),d=this.el,c=e.length,f,i=this._mods,j;if(b===a)return i[e];for(;c--;)f=e[c],j=i[f],j===a&&(j=!1),j!=b&&(i[f]=b,!1!==this._emitMod(f,b)?(j=this._modClassName(f,j),j=(" "+d.className+" ").replace(" "+j+" "," "),(i[f]=b)&&(j+=this._modClassName(f,b)+" "),d.className=g.trim(j)):i[f]=j);return this},hasMod:function(e,b){var d=
this._mods[e];return b===a?!!d:d==b},addMod:function(e,a){return this.mod(e,a?a:!0)},delMod:function(e,b){(b===a||this.hasMod(e,b))&&this.mod(e,!1);return this},toggleMod:function(e,b){return this.mod(e,b===a?!this.hasMod(e):b)},s:function(e,a){"string"===typeof e&&"__"==e.substr(0,2)&&(e=(a?"":".")+this.name+e);return e},elem:function(e){e=this.s("__"+e);return v(this.$(e)[0],o,e.substr(1))},F:function(){return this},$:function(e,b){var d=this.$el,c=b?!1:this.cache,f=this._cache;e!==a&&(c&&f[e]!==
a?d=f[e]:(d=d.find(this.s(e)),c&&(f[e]=d)));return d},clearCache:function(){this._cache={}},__$attr:function(e,b,d,c){var f=this,i=f.$el;c!==a||null!==d&&"object"==typeof d?i=f.$(b):(c=d,d=b);if(null===c)i[g.camelCase("remove-"+e)](d);else if("string"!=typeof d||c!==a)i[e](d,c);else f=i[e](d);return f},$attr:function(e,a,b){return this.__$attr("attr",e,a,b)},$prop:function(a,b,d){return this.__$attr("prop",a,b,d)},$css:function(a,b,d){return this.__$attr("css",a,b,d)},$aria:function(e,b){var d=this,
c;"object"==g.type(e)||b!==a?(c={},"string"==g.type(e)?c["aria-"+e]=b:g.each(e,function(a,e){c["aria-"+a]=e}),d.$attr(c)):d=d.$attr("aria-"+e);return d},$closest:function(a){return this.$el.closest(this.s(a))},is:function(a,b){return this.$(b).is(a)},debounce:function(a,b){var d=this,c,f;"string"===typeof a&&(a=d[a]);return function(){f=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(d,f)},~~b)}},throttle:function(a,b){var d,c,f,i=this;"string"===typeof a&&(a=i[a]);return function D(){c=
arguments;f=!0;d||(f?(a.apply(i,c),f=!1,d=setTimeout(D,b)):d=null)}},onOutside:function(a,b){this.self.$doc.on(this.eventNS(a),u(this,b||y));return this},offOutside:function(a){this.self.$doc.off(this.eventNS(a));return this},one:function(e,b,d){d===a&&(d=b,b=a);this.$el.one(this.eventNS(e),this.s(b),u(this,d));return this},hasOn:function(e,b,d){"string"!=typeof b&&(d=b,b=a);return this.$(b).hasOn(this.eventNS(e),d)},hasOutside:function(a,b){return this.self.$doc.hasOn(this.eventNS(a),b)},on:function(b,
d,c){c===a&&(c=d,d=a);this.$el.on(this.eventNS(b),this.s(d),u(this,c||y));return this},off:function(a,b){this.$el.off(this.eventNS(a),this.s(b));return this},trigger:function(a,b){this._silent||this.$el.trigger(a,b);return this},isDisabled:function(){return this.mod("disabled")},inDOM:function(){var a=this.el;return a&&(a=a.parentNode)&&0<a.nodeType},toBEM:function(a,b){var d=this.$(a);d.bem()||d.bem("add",b);return d.bem()},destroy:function(a){this.destroy=c;delete j[this.getId()];var b=this.self;
this.off();this.$el.removeAttr("bemId").find("[bemId]").bem("destory");b.$win.add(b.$doc).off("."+this.uniqId);a&&this.$el.remove();for(var d in this)this.hasOwnProperty(d)&&delete this[d]}};var B=function(b){for(var c=b.target,f,j,h;l!==c&&null!=c;){f=c.className.match(n);if(null!==f)for(h=f.length;h--;)j=i[f[h]],j!==a&&(!j.active&&!j.inactive)&&(d--,j.init(c,b));c=c.parentNode}d||g(l).off("click leftclick mouseover mousedown focusin change",B)};g.bem=function(b,c,f,j){if(1==b.nodeType)return v(b);
if("string"==typeof b&&i[b])i[b].override(f,j);else{if("string"!=typeof c||!c)j=f,f=c,c=a;var c=i[c]||o,n=!c.inactive;i[b]=c.extend(b,f,j);if(!d&&n)g(l).on("click leftclick mouseover mousedown focusin change",B);n&&d++}};g.bem.init=function(a){g.each(i,function(b,d){if(d.forced)for(var c="."+b,c=a.find(c).add(a.filter(c)),f=c.length;f--;)d.init(c[f])})};g.bem.rename=function(a,b){(i[b]=i[a])._name=b;delete i[a]};g.bemGarbageCollect=function(a){var b,d,a=a||c;for(b in j)d=j[b],!d.inDOM()&&!1!==a(d,
b)&&d.destroy()};g.fn.bem=function(d,c){var f,n=arguments;if(d===a)return v(this[0]);"init"==d?g.bem.init(this):"add"==d?this.addClass(c).each(function(){i[c].init(this)}):"clear"===d?this.find("[bemId]").andSelf().each(function(b,d){(b=j[d.getAttribute("bemId")])!==a&&b.destroy()}):this.each(function(i){(i=v(this))?(i.ready(),f=i[d]===a?i.mod(d,c):i[d].apply(i,b.call(n,1)),f===i&&(f=a)):"destory"==d&&g(this).find("[bemId]").bem("destory",c)});return f===a?this:f};g.fn.hasMod=function(a,b){return this.bem().hasMod(a,
b)};g.fn.findBEM=function(a){return this.find((a&&"*"!=a?"."+a:"")+"[bemId]")};if(l.addEventListener){var E=function(){g(w).bem("init");w=[]};l.addEventListener("DOMNodeInserted",function(a){a=a.target;1==a.nodeType&&(w.push(a),clearTimeout(z),z=setTimeout(E,200))},!1);l.addEventListener("DOMNodeRemoved",function(a){1==a.target.nodeType&&(clearTimeout(A),A=setTimeout(g.bemGarbageCollect,1E4))},!1)}g(function(){g.bem.init(g(l))});h.BEM=i})(window,document,jQuery);
(function(h,l,g){h.bem("b-control",{boundAll:"_setLoadingMod",onMod:{disabled:function(a){var c={disabled:a};this._href=this.href();this.$aria(c).$attr(c).$prop(":input",c).$attr("href",a?null:this._href);a&&this.delMod("hover focus press")},loading:function(a){a&&this.delMod("hover focus press")},press:function(a){this.trigger(a?"press":"release")},hover_no:function(){this.delMod("press")},focus:function(a){if(a)this.on("keydown.focus","onFocusKeyDown");else this.off("keyup.focus keydown.focus")},
"*":function(a,c){if(c&&(this.isDisabled()||this.hasMod("loading")))return!~"press hover focus checked".indexOf(a)}},loading:function(a){if(this._loadingState!==a)return clearTimeout(this._loadingId),this._loadingLock=!0,this._loadingState=a,this._loadingId=setTimeout(this._setLoadingMod,1E3*this.onLoadingDelay[+!a]),!1},_setLoadingMod:function(){this._loadingLock=!1;this.mod("loading",this._loadingState)},onClick:l,onLoadingDelay:[0.65,0.35],onFocusHotKeyCheck:l,onFocusHotKey:function(a){this.onClick(a)},
onFocusKeyDown:function(a){if(!this.hasOn("keyup.focus"))this.on("keyup.focus",function(a){if(this.hasMod("press"))this.onFocusHotKey(a);this.delMod("press").off("keyup.focus")});var c=a.keyCode;if((13==c||32==c)&&!1!==this.onFocusHotKeyCheck(a))this.addMod("press"),a.preventDefault()},href:function(a){return a!==g?(this._href=a,this.hasMod("disabled")||this.$attr("href",a),this):this.$attr("href")||this._href}},{mods:"hover press focus",live:{leftclick:"onClick"},inactive:!0});h.bem("b-button","b-control",
{role:"button",onMod:{press:function(a,c){this.$aria({pressed:a});this.parent(a,c)}},onClick:function(){this.isDisabled()?(this._href=this.$attr("href")||this._href,this.$attr("href",null)):this.isClickSimulated||(this.isClickSimulated=!0,this.$(":input").click(),this.isClickSimulated=!1)}});h.bem("b-checkbox","b-control",{role:"checkbox",onMod:{checked:function(a){var c={checked:a};this.$aria(c)[this._checkedLock?"F":"$prop"](":input",c);this._changeEmitLock||this.$(":input").trigger({type:"change",
isBEM:!0});this.trigger({type:"checked",state:a})}},onClick:function(a){var c=h(a.target),f=a.type,b="keyup"==f,d=c.is(":input");a.isBEM||"leftclick"==f&&d||(this._checkedLock=!1,!d&&"leftclick"==a.type&&(c.closest("label")[0]?this._checkedLock=!0:b=!0),b&&a.preventDefault(),this._changeEmitLock=!b,"radio"==this.role?this.addMod("checked"):this.toggleMod("checked","change"==f?c.prop("checked"):g),this._changeEmitLock=!1)}},{cache:!0,live:{change:"onClick"}});h.bem("b-radio","b-checkbox",{role:"radio",
onMod:{checked_yes:function(){this._uncheckAll()}},_uncheckAll:function(){for(var a=this.$(":input")[0],c=document.getElementsByName(a.name),f=c.length,b,d=h({});f--;)b=c[f],"radio"==b.type&&b!==a&&(d[0]=b,d.trigger("uncheck"))}},{live:{uncheck:function(){this._changeEmitLock=!0;this.delMod("checked");this._changeEmitLock=!1}}})})(jQuery,jQuery.noop);
(function(h,l){var g={13:1,32:1,38:1,40:1};h.bem("b-list",{elItem:"item",isFrozen:!1,loop:!0,canHover:!0,autoSelect:!1,boundAll:"_active _unactive _onHoverEnable",_init:function(){this.__item="__"+this.elItem;this.__item_hover=this.__item+"_hover";this.on("click",this.__item,function(a){this._hoverItem(a.currentTarget);this._onKeyPress({keyCode:13,type:"keyup"})})},_activeDebouce:function(){clearTimeout(this._activeId);this._activeId=setTimeout(this._active,0)},_unactiveDebounce:function(){clearTimeout(this._activeId);
this._activeId=setTimeout(this._unactive,0)},_active:function(){if(!this.hasOutside("keyup.list"))this.onOutside("keyup.list keydown.list","_onKeyPress")},_unactive:function(){this.offOutside("keyup.list keydown.list");this.hasMod("active")||this._hoverItem(null)},_hoverItem:function(a,c){var f=this.__item,b=this.s(f+"_hover",1),d=this.$("."+b),i=d[0],j;a&&a!==this.el&&(j=h(a).closest(this.s(f),this.$el),j[0]!==i&&(d.removeClass(b),j.is(this.s(f+"_disabled"))?j[0]=l:j.addClass(b),j[0]&&this.trigger({type:"hoverenter",
index:this.$(f).index(j),target:j[0],relatedTarget:i,keypress:!!c}),this.trigger({type:"hoverleave",index:this.$(f).index(i),target:i,keypress:!!c})),d=j);return d},_onHoverEnable:function(){this._onHoverDisabled=!1},_onHover:function(a){this.canHover&&!this._onHoverDisabled&&this._hoverItem(a.currentTarget)},_onKeyPress:function(a){var c=a.keyCode,f=a.type,b=this.__item,d;c in g&&(d=this._hoverItem(),38>c?"keyup"==f&&d[0]&&this.trigger({type:"selectitem",target:d[0],index:this.$(b).index(d)}):"keydown"==
f?(a.preventDefault&&a.preventDefault(),clearTimeout(this._onHoverEnableId),this._onHoverDisabled=!0,this.moveHover(40==c?1:-1,!0)):"keyup"==f&&(this._onHoverEnableId=setTimeout(this._onHoverEnable,200)))},onMod:{"active focus":function(a,c){"focus"==c&&a&&this.autoSelect&&!this._hoverItem()[0]&&this._onKeyPress({keyCode:40});a?this._activeDebouce():this.hasMod("active")&&"focus"==c||this.hasMod("focus")&&"active"==c||this._unactiveDebounce()},disabled:function(){this.delMod("active focus");this._unactive()},
"*":function(a,c){if(c&&this.isDisabled())return!~"active focus".indexOf(a)}},freeze:function(a){this._onHoverDisabled=a},selectByIndex:function(a){return this._hoverItem(this.$(this.__item)[a])},moveHover:function(a,c){var f=this.__item,f=this.$(f+":isVisible:not("+this.s(f+"_disabled")+")"),b=f.index(this._hoverItem());return this._hoverItem(f[b+a]||(!~b||this.loop)&&f[0<a?0:f.length-1],c)}},{mods:"focus",live:{"focusin focusout":function(a){this["focusin"==a.type?"on":"off"]("focusin.list",function(a){a.target!==
this.el&&(a=h(a.target).closest(this.s(this.__item)),a[0]&&this._hoverItem(a))})},"mouseenter mouseleave":function(a){"mouseleave"!=a.type?(this._hoverItem(a.target),this.on("hover.list",this.__item,"_onHover")):(a=this.s(this.__item+"_hover",1),this.off("hover.list"),this.$("."+a).removeClass(a))}}})})(jQuery);
(function(h){var l=/input|select|textarea/i,g=1E4;h.bem("b-dropdown","b-control",{boundAll:"collapse",elCtrl:"ctrl",elList:"list",timeout:0,autoCollapse:!0,_init:function(){this.__ctrl="__"+this.elCtrl;this.__list="__"+this.elList;this.on("leftclick",this.__ctrl,"onFocusHotKey");if(this.autoCollapse)this.on("selectitem",this.collapse)},onFocusHotKey:function(a){(!a.isDefaultPrevented()||this.hasMod("expanded"))&&this.toggleMod("expanded")},onFocusHotKeyCheck:function(a){if(this.hasMod("expanded")&&
l.test(a.target.tagName))return!1},collapse:function(){this.delMod("expanded")},_collapseByLeave:function(a){clearTimeout(this._collapseLeaveId);"mouseleave"==a.type&&(this._collapseLeaveId=setTimeout(this.collapse,this.timeout))},onMod:{expanded:function(a){var c=this.__list;g+=a?1:-1;this[a?"onOutside":"offOutside"]("keyup.esc","_onKeyUpEsc").$css(c,{zIndex:a?g:""}).$aria({expanded:a}).elem(this.elList).mod("active",a);if(this.timeout)this.$(this.__ctrl).add(this.$(c))[a?"on":"off"]("hover",this._collapseByLeave);
this.trigger(a?"expand":"collapse")},disabled:function(a){a&&this.collapse()},focus_no:function(){this.collapse()},"*":function(a,c){var f=this.parent(a,c);!1!==f&&(c&&this.isDisabled())&&(f=!~"expanded".indexOf(a));!1!==f&&(this.elem(this.elCtrl).mod(a,c),"expanded"==a&&this.elem(this.elList).mod(a,c));return f}},_onKeyUpEsc:function(a){27==a.keyCode&&this.collapse()}},{mods:"focus",cache:!0});h.bem("b-dropdown__ctrl",null,{mods:"hover"});h.bem("b-dropdown__list","b-list")})(jQuery);
(function(h,l){function g(b,d){var f={text:d.text,value:d.value,label:d.label};h.each(d.attributes,function(a,b){a=b.name;~a.indexOf("data-")&&(f[a]=b.value)});a[0].innerHTML=b.replace(c,function(a,b){return b in f?f[b]:""});return a[0].firstChild}var a=h("<p/>"),c=/\{\{([^\}]+)\}\}/g,f={38:-1,40:1};h.bem("b-select","b-dropdown",{elList:"options",debounceAll:"_searchInSelect:150",multiple:!1,searchDelay:1500,onMod:{focus:function(a,d){this.parent(a,d);this[a?"onOutside":"offOutside"]("keydown.select keypress.select",
this._onSelectKeyPress)},expanded:function(a,d){this._reset();this.parent(a,d);a?(this._refresh(),this._selectOption(this.index()),this.elem(this.elList).loop=!1,this.onOutside("DOMMouseScroll mousewheel","_onMouseWheel")):this.offOutside("DOMMouseScroll mousewheel")}},_init:function(){this.parent();this.elSelect=this.el.getElementsByTagName("select")[0];this.elOptions=this.elSelect.options;var b=this.__list,d=this.__option=b+"__option",b=this.__optgroup=b+"__optgroup",c=this.self;this._tpl={option:a.html(this.$(d)[0]||
c.option).html(),optgroup:a.html(this.$(b)[0]||c.optgroup).html()};this.on("selectitem hoverenter",function(a){"selectitem"==a.type?this.index(a.index):this._float?this._position(!0):this._autoScrollTo(a.target)});this._reset();this.index(this.index(),!0)},_buildOptions:function(a){for(var d=0,c=a.length,f,n,h,l=document.createDocumentFragment();d<c;d++)n=a[d],h=n.nodeName.toLowerCase(),1==n.nodeType&&(f=g(this._tpl[h],n),"option"==h?f.className+=n.disabled?" "+this.s(this.__list+"__option_disabled",
1):"":f.appendChild(this._buildOptions(n.childNodes)),l.appendChild(f));return l},_onSelectKeyPress:function(a){var d=a.which,c=(new Date).getTime(),g=a.keyCode;"keypress"!=a.type?g in f&&!this.hasMod("expanded")&&(a=f[g],d=this.index()+a,c=this.elOptions,this.index(c[d]?d:1>a?c.length-1:0)):d&&(c-this._bufferTS>this.searchDelay&&(this._bufferVal=""),this._bufferTS=c,this._bufferVal+=String.fromCharCode(d),this._searchInSelect())},_searchInSelect:function(){for(var a=this.elOptions,d=0,c=a.length,
f=RegExp("^"+this._bufferVal,"i"),g;d<c;d++)if(g=a[d],!g.disabled&&f.test(g.text)){this.hasMod("expanded")?this._autoScrollTo(d,!0):this.index(d);break}},_selectOption:function(a){var a=this.elem(this.elList).selectByIndex(a),d=this.s(this.__option+"_selected",1);this.$(this.__list).find("."+d).removeClass(d);a.addClass(d);return a},_reset:function(){this._bufferTS=(new Date).getTime();this._bufferVal=""},_refresh:function(){this.hasMod("expanded")&&(this.$(this.__list).empty().append(this._buildOptions(this.elSelect.childNodes)),
this.index(this.index(),!0),this._reset(),this._position())},_onMouseWheel:function(a){var a=a.originalEvent,d=this.$el,c=a.wheelDelta;a.detail&&(c=-a.detail);return d.has(a.target).length&&(a=this.$(this.__list),d=a.scrollTop(),0<c&&0<d||0>c&&a.prop("scrollHeight")-d>a.outerHeight())?void 0:!1},_autoScrollTo:function(a,d){d&&(a=this.elem(this.elList).selectByIndex(a));var c=h(a),f=this.$(this.__list),g=c.outerHeight(),c=c.offset().top-f.offset().top,l=c+g,o=f.prop("scrollTop");0>c?o-=g:l>f.height()&&
(o=l-f.height()+o);f.prop("scrollTop",o)},_position:function(a){var d=this.$el,a=this.$(this.__option+(a?"_hover":"_selected")),c=this.$(this.__list).css({left:0,top:0,height:"",width:""}).prop("scrollTop",0),f=this.self.$win,g=d.offset(),d=f.scrollTop(),f=f.height(),h=g.top,l=c.outerHeight(),g=a.outerHeight(),r=a.offset().top+Math.max(g-this.$(this.__ctrl).outerHeight(),0)/2,t=Math.max(r-h-(h-d),0),r=h-r,d=Math.min(f-h-r-t-5+d,l-t)-g/2;c.css({top:r+t+5,left:0,width:c.prop("scrollWidth")+15,height:Math.min(f,
Math.max(d,5*g))-5,position:"absolute"}).prop("scrollTop",t+(this.$(this.__option).last().is(a)?1E3:0));this._float=30<f-d&&15<c.prop("scrollHeight")-c.outerHeight()},index:function(a,d){var c=this.elSelect,f=c.selectedIndex;if(a===l)return f;if(f!=a||d)c.selectedIndex=a,this.hasMod("expanded")&&this._selectOption(a),this.$(this.__ctrl).html(g(this._tpl.option,c.options[a]).childNodes),this.trigger({type:"change",target:c,isBEM:!0})},get:function(a){return this.elOptions[a]},add:function(a,d){var c=
document.createDocumentFragment(),f=this.get(d);h.each([].concat(a),function(a){var b=new Option;"string"===typeof a?b.text=a:h.extend(b,a);c.appendChild(b)});f?h(f).before(c):h(this.elSelect).append(c);this._refresh()},remove:function(a){var c=this.get(a);this.elSelect.remove(a);this._refresh();return c},clear:function(){this.elOptions.length=0;this._refresh()}},{forced:!0,live:{change:function(a){!a.isBEM&&this.index(a.target.selectedIndex,!0)},refresh:"_refresh"}});h.bem("b-select__options","b-list",
{elItem:"option"})})(jQuery);
(function(h,l){var g={findNodeByRegExp:function(a,c){var f;if(g.isText(a)&&c.test(a.nodeValue))f=a;else for(var b=a.childNodes,d=b.length;d--&&!(f=g.findNodeByRegExp(b[d],c)););return f},wrapText:function(a,c,f,b){var d;h.body.createTextRange?(d=h.body.createTextRange(),d.move("character",c),d.moveEnd(f),d.pasteHTML(b.outerHTML.replace("></",">"+d.text+"</"))):(d=h.createRange(),d.setStart(a,c),d.setEnd(a,c+f),d.surroundContents(b))},selectNode:function(a){var c=h.createRange();c.selectNode(a);return c},
isText:function(a){return a&&3==a.nodeType}};l.bem("b-filter",{elList:"list",elItem:"list__item",elInput:"input",elHighlight:"list__item__highlight",modItemFiltered:"filtered",boundAll:"_onFilter",searchType:"any",ceseSensitive:!1,_init:function(){this.__list="__"+this.elList;this.__item="__"+this.elItem;this.__input="__"+this.elInput;this.__highlight="__"+this.elHighlight;this._itemFiltered=this.__list+"_"+this.modItemFiltered;this._itemFilteredClassName=this.s(this._itemFiltered,1);var a=h.createElement("span");
a.className=this.__highlightClassName=this.s(this.__highlight,1);this._highlightNode=a},onMod:{focus:function(a){this[a?"on":"off"]("keydown.filter",this.__input,"_onKeyPress")}},_onKeyPress:function(){clearTimeout(this._onFilterId);this._onFilterId=setTimeout(this._onFilter,100)},_getSearchRegExp:function(a){return a&&RegExp(("first"==this.searchType?"^":"")+a,this.ceseSensitive?"":"i")},_onFilter:function(){this.filter(this.$(this.__input).val())},_filter:function(a,c){return c.test(a.textContent||
a.innerText)},_highlight:function(a,c,f){(a=g.findNodeByRegExp(a,c))&&g.wrapText(a,a.nodeValue.search(c),f.length,this._highlightNode.cloneNode(!0))},_removeHighlight:function(a){for(var c=a.getElementsByTagName("span"),f=c.length,b=" "+this.__highlightClassName+" ";f--;)if(a=c[f],~(" "+a.className+" ").indexOf(b)){f=a.parentNode;f.insertBefore(a.firstChild,a);f.removeChild(a);a=f.firstChild;do if(c=a.nextSibling)g.isText(a)&&g.isText(c)?(a.nodeValue+=c.nodeValue,f.removeChild(c)):a=c;else break;
while(1);break}},filter:function(a){for(var c=this._getSearchRegExp(a),f=this.$(this.__list).find(".js-filter-item"),b=0,d=f.length,g,j=this._itemFilteredClassName,h;b<d;b+=1)h=" "+(g=f[b]).className+" ",~h.indexOf(j)?h=h.replace(" "+j+" "," "):this._removeHighlight(g),a.length&&(this._filter(g,c,a)?this._highlight(g,c,a):h+=j),g.className=l.trim(h);this.trigger({type:"filter",value:a})}},{mods:"focus"})})(document,jQuery);window.ajs&&ajs.loaded&&ajs.loaded("{jquery.bem}jquery.bem.min");
"function"===typeof define&&define.amd&&define("jquery.bem",[],function(){return window["jquery.bem"]||{}});
