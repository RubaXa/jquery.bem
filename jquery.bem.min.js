/*!
 * jQuery BEM
 * https://github.com/RubaXa/jquery.bem#readme
 *
 * @author	RubaXa	<trash@rubaxa.org>
 * @build	bem/jquery.bem.control bem/jquery.bem.list bem/jquery.bem.dropdown bem/jquery.bem.select
 */
(function(i,l,e,a){var h=function(){},n=e({}),d=[].slice,c=0,j=i.clasess={},f={},w=/\b([a-z\d-]+(?:__[a-z\d-]+)*)\b/ig,r=/\s+/g,o=function(){this.__lego.apply(this,arguments)},C={hover:"mouseenter mouseleave",press:"mouseup mousedown",focus:"focusin focusout"},s={focusin:["focus",!0],focusout:["focus",!1],mouseup:["press",!1],mousedown:["press",!0],mouseover:["hover",!0],mouseenter:["hover",!0],mouseleave:["hover",!1]},x=function(b,g,p,a){b=e.trim(b).split(r);for(a=b.length;a--;)g.call(p,b[a],a)},
D=function(b,g){return e.isFunction(b)&&e.isFunction(g)&&!b.fn?function(){var a=this.parent,m;this.parent=g;m=b.apply(this,arguments);this.parent=a;return m}:b},q=function(b,g,a){for(var m in g)b[m]=a?D(g[m],a[m]):g[m]},t=function(b,g,p){"string"==typeof g&&(g=b[g]);p===a&&(p=[]);return g===a?g:g.bind?g.bind.apply(g,[b].concat(p)):function(){return g.apply(b,p.concat(d.call(arguments)))}},u=function(b,g,p){var m=f[b.getAttribute("bemId")],k=" "+b.className+" ";if(m===a){if(g===a||!~k.indexOf(" "+
g.getName()+" ")){var k=k.match(w),d,c;if(null!==k)for(d=k.length;d--;)if(c=j[k[d]])m=c.init(b)}if(m===a&&(p in j||g))m=(j[p]||g).init(b,a,p)}return m},y=function(){return!1},v=[],z,A;e.event.special.leftclick={setup:function(){e.event.add(this,"click",e.event.special.leftclick.handler)},teardown:function(){e.event.remove(this,"click")},handler:function(b){!b.button&&(!b.metaKey&&!b.shiftKey&&!b.altKey&&!b.ctrlKey)&&(b.type="leftclick",e.event.handle.apply(this,arguments),b.type="click")}};e.expr[":"].isVisible=
function(b){return 5<b.offsetHeight};e.is=function(b,g){n[0]=b;return n.is(g)};e.fn.hasOn=function(b,g){var a=this.data("events"),m=b.split("."),d,c=!1,b=m.splice(0,1);if(a=a&&a[b])if(m.length||g){m.sort();m=m.join(".");for(d=a.length;d--;)if(!m||~a[d].namespace.indexOf(m)){c=g?g==a[d].handler:!0;break}}else c=!0;return c};e.fn.isClosest=function(b,g){return 0<this.closest(b,g).length};o.extend=function(b,g,a){var d,k=this,c={},j=k.fn,f=function(){this.__lego.apply(this,arguments)};for(d in this)k.hasOwnProperty(d)&&
(f[d]=k[d]);f.lazy=f.cache=f.forced=f.inactive=!1;h.prototype=j;f.fn=f.prototype=new h;f.fn.self=f;f._name=b;a&&(e.each(["events","live"],function(b,g){q(f[g]={},k[g]);q(f[g],a[g]||{},k[g]);delete a[g]}),q(f,a));q(c,j.onMod);g&&(q(c,g.onMod||{},j.onMod),e.each(c,function(b,g){delete c[b];for(var b=b.split(r),a=0;a<b.length;a++)c[b[a]]=g}),delete g.onMod,q(f.fn,g,j));f.fn.onMod=c;return f};e.extend(o,{_onEvent:function(b){this.find(b.currentTarget)._onEvent(b)},$win:e(i),$doc:e(l),lazy:!1,forced:!1,
inactive:!0,mods:"",live:{},events:{},init:function(b,g,a){var d=[],k,c;if(!this.active)if(this.active=!this.inactive,this.mods&&e.each(this.mods.split(r),function(b,g){d.push(C[g]||"")}),k={},e.each(this.live,function(b,g){b=e.trim(b).toLowerCase().split(r);for(c=b.length;c--;)k[b[c]]=g,-1==e.inArray(b[c],d)&&d.push(b[c])}),this.live=k,this.active)e(this.getBody()).on(d.join(" "),"."+this.getName(),t(this,"_onEvent"));else if(b)e(b).on(d.join(" "),t(this,"_onEvent"));if(b&&!b.getAttribute("bemId"))return b=
new this(b,a),g&&(a=g.type,b._onEvent(g),"mouseover"==a&&(g.type="mouseenter",b._onEvent(g)),g.type=a),b},getBody:function(){return this._body||this.$doc},find:function(b){return u(b,this)},getName:function(){return this._name},override:function(b,g){if(b){var a=this.fn;b.onMod&&(q(a.onMod,b.onMod,a.onMod),delete b.onMod);q(a,b,a)}g&&q(this,g,this)}});o.fn=o.prototype={self:o,onMod:{"*":h},boundAll:"",debounceAll:"",cache:!1,__lego:function(b,g){e.extend(this,(b.onclick||e.noop)()||{});this.name=
g||this.self.getName();this.cache=this.self.cache;this.$el=e(b).removeAttr("onclick");this.el=this.$el[0];this.uniqId=++e.guid;this._mods={};this._cache={};f[this.uniqId]=this;var a=this.self.attrs||{};a.bemId=this.uniqId;this.role&&(a.role=this.role);this.$attr(a);this.self.lazy?this.debounce("ready")():this.ready()},ready:function(){this.ready=function(){return this};for(var b=this.boundAll,g=this.debounceAll,a=RegExp("\\b"+this.name+"_([a-zA-Z0-9-]+)(_[a-zA-Z0-9-]+)?\\b","g"),d=this.el.className,
c=[],f;f=a.exec(d);)c.push(f);a=c.length;for(this._silent=!0;a--;)this._mods[c[a][1]]=d=c[a][2]?c[a][2].substr(1):!0,this._emitMod(c[a][1],d);this._silent=!1;x(b+" _onFocusOut",function(b){this[b]=this.bound(b)},this);x(g,function(b){b=b.split(":");this[b[0]]=this.debounce(b[0],b[1])},this);this._init();this._onEvent(!0);return this},_init:h,_qevents:[],eventNS:function(b){return(b||"").split(r).join("."+this.uniqId+" ")+"."+this.uniqId},_onEvent:function(b){if(!0===b)for(this._onEvent=this.__onEvent;b=
this._qevents.shift();)this._onEvent(b);else this._qevents.push(b)},__onEvent:function(b){var g=b.type,d=s[g],c=this.self,k=c.live[g],f;if(0===g.indexOf("focus"))if(clearTimeout(this._focusOutId),"focusin"==g){if(this.focused)return;this.focused=!0}else if(this.focused){this._focusEvent=b;this._focusOutId=setTimeout(this._onFocusOut,1);return}k!==a&&("string"==typeof k&&(k=this[k]),f=k.call(this,b));!1!==f&&(d!==a&&~c.mods.indexOf(d[0]))&&this.mod(d[0],d[1])},_onFocusOut:function(){e(l.activeElement).closest(this.el,
this.$el)[0]||(this.focused=!1,this._onEvent(this._focusEvent))},_emitMod:function(b,g,d){var c;c=this.onMod;var k=d||c["*"].call(this,b,g),f="string"===typeof g,j,e;if(!1!==k){c=c[b];if(!1===c)k=!1;else if(c)if(j=typeof c,"string"===j)k=this[c](g,b);else if("object"===j){if(c["*"]!==a&&(k=c["*"].call(this,g,b)),!1!==k&&c[e=f?g:g?"yes":""]!==a)k=c[e].call(this,g,b)}else k=c.call(this,g,b);if(!1!==k&&!0!==d&&!1===this._emitMod(b+"_"+(f?g:g?"yes":"no"),g,!0))k=!1}return k},getId:function(){return this.uniqId},
bound:function(b){return t(this,b,d.call(arguments,1))},_modClassName:function(b,a){return this.name+"_"+b+(a&&"string"===typeof a?"_"+a:"")},mod:function(b,g){var b=e.trim(b).split(r),d=this.el,c=b.length,f,j=this._mods,h;if(g===a)return j[b];for(;c--;)f=b[c],h=j[f],h===a&&(h=!1),h!=g&&(j[f]=g,!1!==this._emitMod(f,g)?(h=this._modClassName(f,h),h=(" "+d.className+" ").replace(" "+h+" "," "),(j[f]=g)&&(h+=this._modClassName(f,g)+" "),d.className=e.trim(h)):j[f]=h);return this},hasMod:function(b,g){var d=
this._mods[b];return g===a?!!d:d==g},addMod:function(b,a){return this.mod(b,a?a:!0)},delMod:function(b,g){(g===a||this.hasMod(b,g))&&this.mod(b,!1);return this},toggleMod:function(b,g){return this.mod(b,g===a?!this.hasMod(b):g)},s:function(b,a){"string"===typeof b&&"__"==b.substr(0,2)&&(b=(a?"":".")+this.name+b);return b},elem:function(b){b=this.s("__"+b);return u(this.$(b)[0],o,b.substr(1))},F:function(){return this},$:function(b,g){var d=this.$el,c=g?!1:this.cache,f=this._cache;b!==a&&(c&&f[b]!==
a?d=f[b]:(d=d.find(this.s(b)),c&&(f[b]=d)));return d},clearCache:function(){this._cache={}},__$attr:function(b,g,d,c){var f=this,j=f.$el;c!==a||null!==d&&"object"==typeof d?j=f.$(g):(c=d,d=g);if(null===c)j[e.camelCase("remove-"+b)](d);else if("string"!=typeof d||c!==a)j[b](d,c);else f=j[b](d);return f},$attr:function(b,a,d){return this.__$attr("attr",b,a,d)},$prop:function(b,a,d){return this.__$attr("prop",b,a,d)},$css:function(b,a,d){return this.__$attr("css",b,a,d)},$aria:function(b,g){var d=this,
c;"object"==e.type(b)||g!==a?(c={},"string"==e.type(b)?c["aria-"+b]=g:e.each(b,function(b,a){c["aria-"+b]=a}),d.$attr(c)):d=d.$attr("aria-"+b);return d},$closest:function(b){return this.$el.closest(this.s(b))},is:function(b,a){return this.$(a).is(b)},debounce:function(b,a){var d=this,c,f;"string"===typeof b&&(b=d[b]);return function(){f=arguments;clearTimeout(c);c=setTimeout(function(){b.apply(d,f)},~~a)}},throttle:function(b,a){var d,c,f,j=this;"string"===typeof b&&(b=j[b]);return function E(){c=
arguments;f=!0;d||(f?(b.apply(j,c),f=!1,d=setTimeout(E,a)):d=null)}},onOutside:function(b,a){this.self.$doc.on(this.eventNS(b),t(this,a||y));return this},offOutside:function(b){this.self.$doc.off(this.eventNS(b));return this},one:function(b,d,c){c===a&&(c=d,d=a);this.$el.one(this.eventNS(b),this.s(d),t(this,c));return this},hasOn:function(b,d,c){"string"!=typeof d&&(c=d,d=a);return this.$(d).hasOn(this.eventNS(b),c)},hasOutside:function(b,a){return this.self.$doc.hasOn(this.eventNS(b),a)},on:function(b,
d,c){c===a&&(c=d,d=a);this.$el.on(this.eventNS(b),this.s(d),t(this,c||y));return this},off:function(b,a){this.$el.off(this.eventNS(b),this.s(a));return this},trigger:function(b,a){this._silent||this.$el.trigger(b,a);return this},isDisabled:function(){return this.mod("disabled")},inDOM:function(){var b=this.el;return b&&(b=b.parentNode)&&0<b.nodeType},toBEM:function(b,a){var d=this.$(b);d.bem()||d.bem("add",a);return d.bem()},destroy:function(b){this.destroy=h;delete f[this.getId()];var a=this.self;
this.off();this.$el.removeAttr("bemId").find("[bemId]").bem("destory");a.$win.add(a.$doc).off("."+this.uniqId);b&&this.$el.remove();for(var d in this)this.hasOwnProperty(d)&&delete this[d]}};var B=function(b){for(var d=b.target,f,h,k;l!==d&&null!=d;){f=d.className.match(w);if(null!==f)for(k=f.length;k--;)h=j[f[k]],h!==a&&(!h.active&&!h.inactive)&&(c--,h.init(d,b));d=d.parentNode}c||e(l).off("click leftclick mouseover mousedown focusin change",B)};e.bem=function(b,d,f,h){if(1==b.nodeType)return u(b);
if("string"==typeof b&&j[b])j[b].override(f,h);else{if("string"!=typeof d||!d)h=f,f=d,d=a;var d=j[d]||o,k=!d.inactive;j[b]=d.extend(b,f,h);if(!c&&k)e(l).on("click leftclick mouseover mousedown focusin change",B);k&&c++}};e.bem.init=function(b){e.each(j,function(a,d){if(d.forced)for(var c="."+a,c=b.find(c).add(b.filter(c)),f=c.length;f--;)d.init(c[f])})};e.bem.rename=function(b,a){(j[a]=j[b])._name=a;delete j[b]};e.bemGarbageCollect=function(b){var a,d,b=b||h;for(a in f)d=f[a],!d.inDOM()&&!1!==b(d,
a)&&d.destroy()};e.fn.bem=function(b,c){var h,n=arguments;if(b===a)return u(this[0]);"init"==b?e.bem.init(this):"add"==b?this.addClass(c).each(function(){j[c].init(this)}):"clear"===b?this.find("[bemId]").andSelf().each(function(b,d){(b=f[d.getAttribute("bemId")])!==a&&b.destroy()}):this.each(function(f){(f=u(this))?(f.ready(),h=f[b]===a?f.mod(b,c):f[b].apply(f,d.call(n,1)),h===f&&(h=a)):"destory"==b&&e(this).find("[bemId]").bem("destory",c)});return h===a?this:h};e.fn.hasMod=function(b,a){return this.bem().hasMod(b,
a)};e.fn.findBEM=function(b){return this.find((b&&"*"!=b?"."+b:"")+"[bemId]")};if(l.addEventListener){var F=function(){e(v).bem("init");v=[]};l.addEventListener("DOMNodeInserted",function(b){b=b.target;1==b.nodeType&&(v.push(b),clearTimeout(z),z=setTimeout(F,200))},!1);l.addEventListener("DOMNodeRemoved",function(b){1==b.target.nodeType&&(clearTimeout(A),A=setTimeout(e.bemGarbageCollect,1E4))},!1)}e(function(){e.bem.init(e(l))});i.BEM=j})(window,document,jQuery);
(function(i,l,e){i.bem("b-control",{boundAll:"_setLoadingMod",onMod:{disabled:function(a){var h={disabled:a};this._href=this.href();this.$aria(h).$attr(h).$prop(":input",h).$attr("href",a?null:this._href);a&&this.delMod("hover focus press")},loading:function(a){a&&this.delMod("hover focus press")},press:function(a){this.trigger(a?"press":"release")},hover_no:function(){this.delMod("press")},focus:function(a){if(a)this.on("keydown.focus","onFocusKeyDown");else this.off("keyup.focus keydown.focus")},
"*":function(a,h){if(h&&(this.isDisabled()||this.hasMod("loading")))return!~"press hover focus checked".indexOf(a)}},loading:function(a){if(this._loadingState!==a)return clearTimeout(this._loadingId),this._loadingLock=!0,this._loadingState=a,this._loadingId=setTimeout(this._setLoadingMod,1E3*this.onLoadingDelay[+!a]),!1},_setLoadingMod:function(){this._loadingLock=!1;this.mod("loading",this._loadingState)},onClick:l,onLoadingDelay:[0.65,0.35],onFocusHotKeyCheck:l,onFocusHotKey:function(a){this.onClick(a)},
onFocusKeyDown:function(a){if(!this.hasOn("keyup.focus"))this.on("keyup.focus",function(a){if(this.hasMod("press"))this.onFocusHotKey(a);this.delMod("press").off("keyup.focus")});var h=a.keyCode;if((13==h||32==h)&&!1!==this.onFocusHotKeyCheck(a))this.addMod("press"),a.preventDefault()},href:function(a){return a!==e?(this._href=a,this.hasMod("disabled")||this.$attr("href",a),this):this.$attr("href")||this._href}},{mods:"hover press focus",live:{leftclick:"onClick"},inactive:!0});i.bem("b-button","b-control",
{role:"button",onMod:{press:function(a,h){this.$aria({pressed:a});this.parent(a,h)}},onClick:function(){this.isDisabled()?(this._href=this.$attr("href")||this._href,this.$attr("href",null)):this.isClickSimulated||(this.isClickSimulated=!0,this.$(":input").click(),this.isClickSimulated=!1)}});i.bem("b-checkbox","b-control",{role:"checkbox",onMod:{checked:function(a){var h={checked:a};this.$aria(h)[this._checkedLock?"F":"$prop"](":input",h);this._changeEmitLock||this.$(":input").trigger({type:"change",
isBEM:!0});this.trigger({type:"checked",state:a})}},onClick:function(a){var h=i(a.target),n=a.type,d="keyup"==n,c=h.is(":input");a.isBEM||"leftclick"==n&&c||(this._checkedLock=!1,!c&&"leftclick"==a.type&&(h.closest("label")[0]?this._checkedLock=!0:d=!0),d&&a.preventDefault(),this._changeEmitLock=!d,"radio"==this.role?this.addMod("checked"):this.toggleMod("checked","change"==n?h.prop("checked"):e),this._changeEmitLock=!1)}},{cache:!0,live:{change:"onClick"}});i.bem("b-radio","b-checkbox",{role:"radio",
onMod:{checked_yes:function(){this._uncheckAll()}},_uncheckAll:function(){for(var a=this.$(":input")[0],h=document.getElementsByName(a.name),e=h.length,d,c=i({});e--;)d=h[e],"radio"==d.type&&d!==a&&(c[0]=d,c.trigger("uncheck"))}},{live:{uncheck:function(){this._changeEmitLock=!0;this.delMod("checked");this._changeEmitLock=!1}}})})(jQuery,jQuery.noop);
(function(i,l){var e={13:1,32:1,38:1,40:1};i.bem("b-list",{elItem:"item",isFrozen:!1,loop:!0,canHover:!0,autoSelect:!1,boundAll:"_active _unactive _onHoverEnable",_init:function(){this.__item="__"+this.elItem;this.__item_hover=this.__item+"_hover";this.on("click",this.__item,function(a){this._hoverItem(a.currentTarget);this._onKeyPress({keyCode:13,type:"keyup"})})},_activeDebouce:function(){clearTimeout(this._activeId);this._activeId=setTimeout(this._active,0)},_unactiveDebounce:function(){clearTimeout(this._activeId);
this._activeId=setTimeout(this._unactive,0)},_active:function(){if(!this.hasOutside("keyup.list"))this.onOutside("keyup.list keydown.list","_onKeyPress")},_unactive:function(){this.offOutside("keyup.list keydown.list");this.hasMod("active")||this._hoverItem(null)},_hoverItem:function(a,h){var e=this.__item,d=this.s(e+"_hover",1),c=this.$("."+d),j=c[0],f;a&&a!==this.el&&(f=i(a).closest(this.s(e),this.$el),f[0]!==j&&(c.removeClass(d),f.is(this.s(e+"_disabled"))?f[0]=l:f.addClass(d),f[0]&&this.trigger({type:"hoverenter",
index:this.$(e).index(f),target:f[0],relatedTarget:j,keypress:!!h}),this.trigger({type:"hoverleave",index:this.$(e).index(j),target:j,keypress:!!h})),c=f);return c},_onHoverEnable:function(){this._onHoverDisabled=!1},_onHover:function(a){this.canHover&&!this._onHoverDisabled&&this._hoverItem(a.currentTarget)},_onKeyPress:function(a){var h=a.keyCode,i=a.type,d=this.__item,c;h in e&&(c=this._hoverItem(),38>h?"keyup"==i&&c[0]&&this.trigger({type:"selectitem",target:c[0],index:this.$(d).index(c)}):"keydown"==
i?(a.preventDefault&&a.preventDefault(),clearTimeout(this._onHoverEnableId),this._onHoverDisabled=!0,this.moveHover(40==h?1:-1,!0)):"keyup"==i&&(this._onHoverEnableId=setTimeout(this._onHoverEnable,200)))},onMod:{"active focus":function(a,h){"focus"==h&&a&&this.autoSelect&&!this._hoverItem()[0]&&this._onKeyPress({keyCode:40});a?this._activeDebouce():this.hasMod("active")&&"focus"==h||this.hasMod("focus")&&"active"==h||this._unactiveDebounce()},disabled:function(){this.delMod("active focus");this._unactive()},
"*":function(a,h){if(h&&this.isDisabled())return!~"active focus".indexOf(a)}},freeze:function(a){this._onHoverDisabled=a},selectByIndex:function(a){return this._hoverItem(this.$(this.__item)[a])},moveHover:function(a,h){var e=this.__item,e=this.$(e+":isVisible:not("+this.s(e+"_disabled")+")"),d=e.index(this._hoverItem());return this._hoverItem(e[d+a]||(!~d||this.loop)&&e[0<a?0:e.length-1],h)}},{mods:"focus",live:{"focusin focusout":function(a){this["focusin"==a.type?"on":"off"]("focusin.list",function(a){a.target!==
this.el&&(a=i(a.target).closest(this.s(this.__item)),a[0]&&this._hoverItem(a))})},"mouseenter mouseleave":function(a){"mouseleave"!=a.type?(this._hoverItem(a.target),this.on("hover.list",this.__item,"_onHover")):(a=this.s(this.__item+"_hover",1),this.off("hover.list"),this.$("."+a).removeClass(a))}}})})(jQuery);
(function(i){var l=/input|select|textarea/i,e=1E4;i.bem("b-dropdown","b-control",{boundAll:"collapse",elCtrl:"ctrl",elList:"list",timeout:0,autoCollapse:!0,_init:function(){this.__ctrl="__"+this.elCtrl;this.__list="__"+this.elList;this.on("leftclick",this.__ctrl,"onFocusHotKey");if(this.autoCollapse)this.on("selectitem",this.collapse)},onFocusHotKey:function(a){(!a.isDefaultPrevented()||this.hasMod("expanded"))&&this.toggleMod("expanded")},onFocusHotKeyCheck:function(a){if(this.hasMod("expanded")&&
l.test(a.target.tagName))return!1},collapse:function(){this.delMod("expanded")},_collapseByLeave:function(a){clearTimeout(this._collapseLeaveId);"mouseleave"==a.type&&(this._collapseLeaveId=setTimeout(this.collapse,this.timeout))},onMod:{expanded:function(a){var h=this.__list;e+=a?1:-1;this[a?"onOutside":"offOutside"]("keyup.esc","_onKeyUpEsc").$css(h,{zIndex:a?e:""}).$aria({expanded:a}).elem(this.elList).mod("active",a);if(this.timeout)this.$(this.__ctrl).add(this.$(h))[a?"on":"off"]("hover",this._collapseByLeave);
this.trigger(a?"expand":"collapse")},disabled:function(a){a&&this.collapse()},focus_no:function(){this.collapse()},"*":function(a,e){var i=this.parent(a,e);!1!==i&&(e&&this.isDisabled())&&(i=!~"expanded".indexOf(a));!1!==i&&(this.elem(this.elCtrl).mod(a,e),"expanded"==a&&this.elem(this.elList).mod(a,e));return i}},_onKeyUpEsc:function(a){27==a.keyCode&&this.collapse()}},{mods:"focus",cache:!0});i.bem("b-dropdown__ctrl",null,{mods:"hover"});i.bem("b-dropdown__list","b-list")})(jQuery);
(function(i,l){function e(d,c){var e={text:c.text,value:c.value,label:c.label};i.each(c.attributes,function(a,d){a=d.name;~a.indexOf("data-")&&(e[a]=d.value)});a[0].innerHTML=d.replace(h,function(a,d){return d in e?e[d]:""});return a[0].firstChild}var a=i("<p/>"),h=/\{\{([^\}]+)\}\}/g,n={38:-1,40:1};i.bem("b-select","b-dropdown",{elList:"options",debounceAll:"_searchInSelect:150",multiple:!1,searchDelay:1500,onMod:{focus:function(a,c){this.parent(a,c);this[a?"onOutside":"offOutside"]("keydown.select keypress.select",
this._onSelectKeyPress)},expanded:function(a,c){this._reset();this.parent(a,c);a?(this._refresh(),this._selectOption(this.index()),this.elem(this.elList).loop=!1,this.onOutside("DOMMouseScroll mousewheel","_onMouseWheel")):this.offOutside("DOMMouseScroll mousewheel")}},_init:function(){this.parent();this.elSelect=this.el.getElementsByTagName("select")[0];this.elOptions=this.elSelect.options;var d=this.__list,c=this.__option=d+"__option",d=this.__optgroup=d+"__optgroup",e=this.self;this._tpl={option:a.html(this.$(c)[0]||
e.option).html(),optgroup:a.html(this.$(d)[0]||e.optgroup).html()};this.on("selectitem hoverenter",function(a){"selectitem"==a.type?this.index(a.index):this._float?this._position(!0):this._autoScrollTo(a.target)});this._reset();this.index(this.index(),!0)},_buildOptions:function(a){for(var c=0,j=a.length,f,h,i,l=document.createDocumentFragment();c<j;c++)h=a[c],i=h.nodeName.toLowerCase(),1==h.nodeType&&(f=e(this._tpl[i],h),"option"==i?f.className+=h.disabled?" "+this.s(this.__list+"__option_disabled",
1):"":f.appendChild(this._buildOptions(h.childNodes)),l.appendChild(f));return l},_onSelectKeyPress:function(a){var c=a.which,e=(new Date).getTime(),f=a.keyCode;"keypress"!=a.type?f in n&&!this.hasMod("expanded")&&(a=n[f],c=this.index()+a,e=this.elOptions,this.index(e[c]?c:1>a?e.length-1:0)):c&&(e-this._bufferTS>this.searchDelay&&(this._bufferVal=""),this._bufferTS=e,this._bufferVal+=String.fromCharCode(c),this._searchInSelect())},_searchInSelect:function(){for(var a=this.elOptions,c=0,e=a.length,
f=RegExp("^"+this._bufferVal,"i"),h;c<e;c++)if(h=a[c],!h.disabled&&f.test(h.text)){this.hasMod("expanded")?this._autoScrollTo(c,!0):this.index(c);break}},_selectOption:function(a){var a=this.elem(this.elList).selectByIndex(a),c=this.s(this.__option+"_selected",1);this.$(this.__list).find("."+c).removeClass(c);a.addClass(c);return a},_reset:function(){this._bufferTS=(new Date).getTime();this._bufferVal=""},_refresh:function(){this.hasMod("expanded")&&(this.$(this.__list).empty().append(this._buildOptions(this.elSelect.childNodes)),
this.index(this.index(),!0),this._reset(),this._position())},_onMouseWheel:function(a){var a=a.originalEvent,c=this.$el,e=a.wheelDelta;a.detail&&(e=-a.detail);return c.has(a.target).length&&(a=this.$(this.__list),c=a.scrollTop(),0<e&&0<c||0>e&&a.prop("scrollHeight")-c>a.outerHeight())?void 0:!1},_autoScrollTo:function(a,c){c&&(a=this.elem(this.elList).selectByIndex(a));var e=i(a),f=this.$(this.__list),h=e.outerHeight(),e=e.offset().top-f.offset().top,l=e+h,o=f.prop("scrollTop");0>e?o-=h:l>f.height()&&
(o=l-f.height()+o);f.prop("scrollTop",o)},_position:function(a){var c=this.$el,a=this.$(this.__option+(a?"_hover":"_selected")),e=this.$(this.__list).css({left:0,top:0,height:"",width:""}).prop("scrollTop",0),f=this.self.$win,h=c.offset(),c=f.scrollTop(),f=f.height(),i=h.top,l=e.outerHeight(),h=a.outerHeight(),n=a.offset().top+Math.max(h-this.$(this.__ctrl).outerHeight(),0)/2,s=Math.max(n-i-(i-c),0),n=i-n,c=Math.min(f-i-n-s-5+c,l-s)-h/2;e.css({top:n+s+5,left:0,width:e.prop("scrollWidth")+15,height:Math.min(f,
Math.max(c,5*h))-5,position:"absolute"}).prop("scrollTop",s+(this.$(this.__option).last().is(a)?1E3:0));this._float=30<f-c&&15<e.prop("scrollHeight")-e.outerHeight()},index:function(a,c){var h=this.elSelect,f=h.selectedIndex;if(a===l)return f;if(f!=a||c)h.selectedIndex=a,this.hasMod("expanded")&&this._selectOption(a),this.$(this.__ctrl).html(e(this._tpl.option,h.options[a]).childNodes),this.trigger({type:"change",target:h,isBEM:!0})},get:function(a){return this.elOptions[a]},add:function(a,c){var e=
document.createDocumentFragment(),f=this.get(c);i.each([].concat(a),function(a){var c=new Option;"string"===typeof a?c.text=a:i.extend(c,a);e.appendChild(c)});f?i(f).before(e):i(this.elSelect).append(e);this._refresh()},remove:function(a){var c=this.get(a);this.elSelect.remove(a);this._refresh();return c},clear:function(){this.elOptions.length=0;this._refresh()}},{forced:!0,live:{change:function(a){!a.isBEM&&this.index(a.target.selectedIndex,!0)},refresh:"_refresh"}});i.bem("b-select__options","b-list",
{elItem:"option"})})(jQuery);window.ajs&&ajs.loaded&&ajs.loaded("{jquery.bem}jquery.bem.min");"function"===typeof define&&define.amd&&define("jquery.bem",[],function(){return window["jquery.bem"]||{}});
