/*!
 * jQuery BEM
 * https://github.com/RubaXa/jquery.bem#readme
 *
 * @author	RubaXa	<trash@rubaxa.org>
 * @build	bem/jquery.bem.control bem/jquery.bem.list bem/jquery.bem.dropdown bem/jquery.bem.filter
 */
(function(f,m,d,a){var c=function(){},e=d({}),j=[].slice,k=0,l=f.clasess={},p={},u=/\b([a-z\d-]+(?:__[a-z\d-]+)*)\b/ig,r=/\s+/g,q=function(){this.__lego.apply(this,arguments)},s=!0,A={hover:"mouseenter mouseleave",press:"mouseup mousedown",focus:"focusin focusout"},x={focusin:["focus",s],focusout:["focus",!1],mouseup:["press",!1],mousedown:["press",s],mouseover:["hover",s],mouseenter:["hover",s],mouseleave:["hover",!1]},B=function(b,h){for(var a=[],i;i=b.exec(h);)a.push(i);return a},C=function(b,
h){return d.isFunction(b)&&d.isFunction(h)&&!b.fn?function(){var a=this.parent,i;this.parent=h;i=b.apply(this,arguments);this.parent=a;return i}:b},t=function(b,h,a){for(var i in h)b[i]=a?C(h[i],a[i]):h[i]},v=function(b,h,g){"string"==typeof h&&(h=b[h]);g===a&&(g=[]);return h===a?h:h.bind?h.bind.apply(h,[b].concat(g)):function(){return h.apply(b,g.concat(j.call(arguments)))}},w=function(b,h,g){var i=p[b.getAttribute("bemId")],n=" "+b.className+" ";if(i===a){if(h===a||!~n.indexOf(" "+h.getName()+" ")){var n=
n.match(u),c,d;if(null!==n)for(c=n.length;c--;)if(d=l[n[c]])i=d.init(b)}!1!==h&&i===a&&(i=(l[g]||h).init(b,a,g))}return i},y;d.event.special.leftclick={setup:function(){d.event.add(this,"click",d.event.special.leftclick.handler)},teardown:function(){d.event.remove(this,"click")},handler:function(b){!b.button&&(!b.metaKey&&!b.shiftKey&&!b.altKey&&!b.ctrlKey)&&(b.type="leftclick",d.event.handle.apply(this,arguments),b.type="click")}};d.is=function(b,a){e[0]=b;return e.is(a)};d.fn.hasOn=function(b,a){var g=
this.data("events"),i=b.split("."),c,d=!1,b=i.splice(0,1);if(g=g&&g[b])if(i.length||a){i.sort();i=i.join(".");for(c=g.length;c--;)if(!i||~g[c].namespace.indexOf(i)){d=a?a==g[c].handler:!0;break}}else d=!0;return d};d.fn.isClosest=function(b,a){return 0<this.closest(b,a).length};q.extend=function(b,a,g){var i,n={},e=this.fn,o=function(){this.__lego.apply(this,arguments)};for(i in this)this.hasOwnProperty(i)&&(o[i]=this[i]);c.prototype=e;o.fn=o.prototype=new c;o.fn.__self=o;o._name=b;if(g)for(i in t(o.live=
{},this.live),t(o.live,g.live||{},this.live),delete g.live,g)o[i]=g[i];t(n,e.onMod);a&&(t(n,a.onMod||{},e.onMod),d.each(n,function(b,a){delete n[b];for(var b=b.split(r),h=0;h<b.length;h++)n[b[h]]=a}),delete a.onMod,t(o.fn,a,e));o.fn.onMod=n;return o};q.methods=function(b){var a=this.fn;t(a.onMod,b.onMod||{},a.onMod)};d.extend(q,{_body:a,_name:a,_onEvent:function(b){this.find(b.currentTarget)._onEvent(b)},$win:d(f),$doc:d(m),lazy:!1,live:{},mods:"",init:function(b,a,g){var i=[],c,e;if(!this.active){this.active=
!0;this.mods&&d.each(this.mods.split(r),function(b,a){i.push(A[a]||"")});c={};d.each(this.live,function(b,a){b=d.trim(b).toLowerCase().split(r);for(e=0;e<b.length;e++)c[b[e]]=a,i.push(b[e])});this.live=c;i=i.join(" ").split(r);for(c=i.length;c--;)for(e=c;e--;)if(i[c]==i[e]){i.splice(c,1);break}d(this.getBody()).on(i.join(" "),"."+this.getName(),v(this,"_onEvent"))}if(b)return b=new this(b,g),a&&(g=a.type,"mouseover"==g&&(a.type="mouseenter"),b._onEvent(a),a.type=g),b},getBody:function(){return this._body||
this.$doc},find:function(b){return w(b,this)},getName:function(){return this._name}});q.fn=q.prototype={__self:q,onMod:{"*":c},bindAll:[],cache:!1,__lego:function(b,a){d.extend(this,(b.onclick||d.noop)()||{});this.name=a||this.__self.getName();this.cache=this.__self.cache;this.$el=d(b).removeAttr("onclick");this.el=this.$el[0];this.uniqId=++d.guid;this._mods={};this._cache={};p[d.guid]=this;var g=this.__self.attrs||{};g.bemId=this.uniqId;this.role&&(g.role=this.role);this.$attr(g);this.__self.lazy?
this.gap("ready")():this.ready()},ready:function(){this.ready=function(){return this};var b=this.bindAll,a=B(RegExp("\\b"+this.name+"_([a-zA-Z0-9-]+)(_[a-zA-Z0-9-]+)?\\b","g"),this.el.className),g=a.length,c;for(this._silent=!0;g--;)this._mods[a[g][1]]=c=a[g][2]?a[g][2].substr(1):!0,this._emitMod(a[g][1],c);this._silent=!1;"string"==typeof b&&(b=b.split(r));b.push("_onFocusOut");for(g=b.length;g--;)this[b[g]]=this.proxy(b[g]);this._init();this._onEvent(!0);return this},_init:c,_qevents:[],eventNS:function(b){return(b||
"").split(r).join("."+this.uniqId+" ")+"."+this.uniqId},_onEvent:function(b){if(!0===b)for(this._onEvent=this.__onEvent;b=this._qevents.shift();)this._onEvent(b);else this._qevents.push(b)},__onEvent:function(b){var h=b.type,g=x[h],c=this.__self,d=c.live[h],e;if(0===h.indexOf("focus"))if(clearTimeout(this._focusOutId),"focusin"==h){if(this.focused)return;this.focused=!0}else if(this.focused){this._focusEvent=b;this._focusOutId=setTimeout(this._onFocusOut,1);return}d!==a&&("string"==typeof d&&(d=this[d]),
e=d.call(this,b));!1!==e&&(g!==a&&~c.mods.indexOf(g[0]))&&this.mod(g[0],g[1])},_onFocusOut:function(){d(m.activeElement).closest(this.el,this.$el)[0]||(this.focused=!1,this._onEvent(this._focusEvent))},_emitMod:function(b,h,g){var c;c=this.onMod;var d=g||c["*"].call(this,b,h),e="string"===typeof h;if(!1!==d&&(c=c[b],!1===c?d=!1:c&&("string"==typeof c?d=this[c](h,b):"object"===typeof c?(c["*"]!==a&&(d=c["*"].call(this,h,b)),!1!==d&&c[e?h:h?"yes":""]!==a&&c[h].call(this,h,b)):d=c.call(this,h,b)),!1!==
d&&!0!==g&&!1===this._emitMod(b+(e?h:h?"_yes":"_no"),h,!0)))d=!1;return d},getId:function(){return this.uniqId},proxy:function(b){return v(this,b,j.call(arguments,1))},_modClassName:function(b,a){return this.name+"_"+b+(a&&"string"===typeof a?"_"+a:"")},mod:function(b,h){var b=d.trim(b).split(r),c=this.el,i=b.length,e,j=this._mods,f;if(h===a)return j[b];for(;i--;)e=b[i],f=j[e],f!=h&&(j[e]=h,!1!==this._emitMod(e,h)?(f=this._modClassName(e,f),f=(" "+c.className+" ").replace(" "+f+" "," "),(j[e]=h)&&
(f+=this._modClassName(e,h)+" "),c.className=d.trim(f)):j[e]=f);return this},hasMod:function(b,h){var c=this._mods[b];return h===a?!!c:c==h},addMod:function(b,a){return this.mod(b,a?a:s)},delMod:function(b,h){(h===a||this.hasMod(b,h))&&this.mod(b,!1);return this},toggleMod:function(b,h){return this.mod(b,h===a?!this.hasMod(b):h)},s:function(b,a){return b="string"===typeof b?"__"==b.substr(0,2)?(a?"":".")+this.name+b:b:b},elem:function(b){b=this.s("__"+b);return w(this.$(b)[0],q,b.substr(1))},F:function(){return this},
$:function(b,h){var c=this.$el,d=h?!1:this.cache,e=this._cache;b!==a&&(d&&e[b]!==a?c=e[b]:(c=c.find(this.s(b)),d&&(e[b]=c)));return c},__$attr:function(b,c,g,d){var e=this,f=e.$el;d!==a||null!==g&&"object"==typeof g?f=e.$(c):(d=g,g=c);if(null===d)f["remove"+b.charAt(0).toUpperCase()+b.substr(1)](g);else if("string"!=typeof g||d!==a)f[b](g,d);else e=f[b](g);return e},$attr:function(b,a,c){return this.__$attr("attr",b,a,c)},$prop:function(b,a,c){return this.__$attr("prop",b,a,c)},$css:function(b,a,
c){return this.__$attr("css",b,a,c)},$aria:function(b,c){var g=this,e;"object"==d.type(b)||c!==a?(e={},"string"==d.type(b)?e["aria-"+b]=c:d.each(b,function(b,a){e["aria-"+b]=a}),g.$attr(e)):g=g.$attr("aria-"+b);return g},$closest:function(b){return this.$el.closest(this.s(b))},is:function(b,a){return this.$(a).is(b)},gap:function(b){var a=this;return function(){var c=arguments;setTimeout(function(){("string"==typeof b?a[b]:b).apply(a,c)},0)}},onOutside:function(a,c){this.__self.$doc.on(this.eventNS(a),
v(this,c));return this},offOutside:function(a){this.__self.$doc.off(this.eventNS(a));return this},one:function(b,c,d){d===a&&(d=c,c=a);this.$el.one(this.eventNS(b),this.s(c),v(this,d));return this},hasOn:function(b,c,d){"string"!=typeof c&&(d=c,c=a);return this.$(c).hasOn(this.eventNS(b),d)},hasOutside:function(a,c){return this.__self.$doc.hasOn(this.eventNS(a),c)},on:function(b,c,d){d===a&&(d=c,c=a);this.$el.on(this.eventNS(b),this.s(c),v(this,d));return this},off:function(a,c){this.$el.off(this.eventNS(a),
this.s(c));return this},trigger:function(a,c){this._silent||this.$el.trigger(a,c);return this},isDisabled:function(){return this.mod("disabled")},inDOM:function(){var a=this.el;return a&&(a=a.parentNode)&&0<a.nodeType},destroy:function(a){this.destroy=c;delete p[this.getId()];var d=this.__self;this.off();this.$el.removeAttr("bemId").find("[bemId]").bem("destory");d.$win.add(d.$doc).off("."+this.uniqId);a&&this.$el.remove();for(var g in this)this.hasOwnProperty(g)&&delete this[g]}};var z=function(b){for(var c=
b.target,g,e,f;m!==c&&null!=c;){g=c.className.match(u);if(null!==g)for(f=g.length;f--;)e=l[g[f]],e!==a&&!e.active&&(k--,e.init(c,b));c=c.parentNode}k||d(m).off("click mouseover mousedown focusin change",z)};d.bem=function(a,c,e){if(1==a.nodeType)return w(a);if("yes"===a)s="yes",d.each(x,function(a,b){b[1]=b[1]?"yes":0});else{if("string"==typeof a){if(l[a]){l[a].methods(c,e);return}a=[0,a]}var i=a[0],f=l[i]||q,j=e&&e.force;if(!j&&!k&&i)d(m).on("click mouseover mousedown focusin change",z);!j&&i&&k++;
a=a[1];l[a]=f=f.extend(a,c,e);j&&f.init()}};d.bemGarbageCollect=function(a){var d,e,a=a||c;for(d in p)e=p[d],!e.inDOM()&&!1!==a(e,d)&&e.destroy()};d.fn.bem=function(b,c){var e,i=arguments;if(b===a)return w(this[0]);"add"==b?this.addClass(c).each(function(){l[c].init(this)}):"clear"===b?this.find("[bemId]").andSelf().each(function(b,c){(b=p[c.getAttribute("bemId")])!==a&&b.destroy()}):this.each(function(f){(f=w(this))?(e=f[b]===a?f.ready().mod(b,c):f[b].apply(f,j.call(i,1)),e===f&&(e=a)):"destory"==
b&&d(this).find("[bemId]").bem("destory",c)});return e===a?this:e};d.fn.hasMod=function(a,c){return this.bem().hasMod(a,c)};d.fn.findBEM=function(a){return this.find((a&&"*"!=a?"."+a:"")+"[bemId]")};d(m).on("DOMNodeRemoved",function(a){a=a.originalEvent.target;1==a.nodeType&&(clearTimeout(y),y=setTimeout(d.bemGarbageCollect,1E4))});f.BEM=l})(window,document,jQuery);
(function(f,m,d){m=f.noop;f.bem([null,"b-control"],{bindAll:"_setLoadingMod",onMod:{disabled:function(a){var c={disabled:a};this._href=this.href();this.$aria(c).$attr(c).$prop(":input",c).$attr("href",a?null:this._href);a&&this.delMod("hover focus press")},loading:function(a){a&&this.delMod("hover focus press")},press:function(a){this.trigger(a?"press":"release")},hover_no:function(){this.delMod("press")},focus:function(a){if(a)this.on("keydown.focus","onFocusKeyDown");else this.off("keyup.focus keydown.focus")},
"*":function(a,c){if(c&&(this.isDisabled()||this.hasMod("loading")))return!~"press hover focus checked".indexOf(a)}},loading:function(a){if(this._loadingState!==a)return clearTimeout(this._loadingId),this._loadingLock=!0,this._loadingState=a,this._loadingId=setTimeout(this._setLoadingMod,1E3*this.onLoadingDelay[+!a]),!1},_setLoadingMod:function(){this._loadingLock=!1;this.mod("loading",this._loadingState)},onClick:m,onLoadingDelay:[0.65,0.35],onFocusHotKeyCheck:f.noop,onFocusHotKey:function(a){this.onClick(a)},
onFocusKeyDown:function(a){if(!this.hasOn("keyup.focus"))this.on("keyup.focus",function(a){if(this.hasMod("press"))this.onFocusHotKey(a);this.delMod("press").off("keyup.focus")});var c=a.keyCode;if((13==c||32==c)&&!1!==this.onFocusHotKeyCheck(a))this.addMod("press"),a.preventDefault()},href:function(a){return a!==d?(this._href=a,this.hasMod("disabled")||this.$attr("href",a),this):this.$attr("href")||this._href}},{mods:"hover press focus",live:{leftclick:"onClick"}});f.bem(["b-control","b-button"],
{role:"button",onMod:{press:function(a,c){this.$aria({pressed:a});this.parent(a,c)}},onClick:function(){this.isDisabled()?(this._href=this.$attr("href")||this._href,this.$attr("href",null)):this.isClickSimulated||(this.isClickSimulated=!0,this.$(":input").click(),this.isClickSimulated=!1)}});f.bem(["b-control","b-checkbox"],{role:"checkbox",onMod:{checked:function(a){var c={checked:a};this.$aria(c)[this._checkedLock?"F":"$prop"](":checkbox",c);this._chengeEmitLock||this.$(":checkbox").trigger({type:"change",
isBEM:!0});this.trigger({type:"checked",state:a})}},onClick:function(a){var c=f(a.target),e=a.type,j="keyup"==e;a.isBEM||"leftclick"==e&&c.is(":checkbox")||(this._checkedLock=!1,!c.is(":checkbox")&&"leftclick"==a.type&&(c.closest("label")[0]?this._checkedLock=!0:j=!0),j&&a.preventDefault(),this._chengeEmitLock=!j,this.toggleMod("checked","change"==e?c.prop("checked"):d),this._chengeEmitLock=!1)},val:function(){return this.$(":checkbox").val()}},{cache:!0,live:{change:function(a){this.onClick(a)}}})})(jQuery);
(function(f,m){var d={13:1,32:1,38:1,40:1};f.expr[":"].listitemvisible=function(a){return 5<a.offsetHeight};f.bem("b-list",{_init:function(){this.on("click","__item",function(a){this.select(a.currentTarget);this._onKeyDown({keyCode:13})})},select:function(a){var c=this.s("__item_hover"),d=c.substr(1),c=this.$(c),j=c[0];if(a===m)return c;a!==this.el&&(a=f(a).closest(this.s("__item"),this.$el),a[0]!==j&&(c.removeClass(d),a.is(this.s("__item_disabled"))?a[0]=m:a.addClass(d),this.trigger({type:"hoveritem",
target:a[0],relatedTarget:j})))},_onHover:function(a){this.select(a.currentTarget)},_onKeyDown:function(a){var c=a.keyCode,e,f;c in d&&(e=this.select(),f=":not("+this.s("__item_disabled")+"):listitemvisible",38>c?e[0]&&this.trigger({type:"selectitem",target:e[0]}):(e=e[40==c?"nextAll":"prevAll"](f).first(),f=this.s("__item")+f,this.select(e[0]?e:this.$(f)[40==c?"first":"last"]()),a.preventDefault&&a.preventDefault()))},onMod:{"active focus":function(a,c){"focus"==c&&a&&this.autoSelect&&!this.select()[0]&&
this._onKeyDown({keyCode:40});if(a){if(!this.hasOutside("keydown.list"))this.onOutside("keydown.list","_onKeyDown")}else this.hasMod("active")&&"focus"==c||this.hasMod("focus")&&"active"==c||(this.offOutside("keydown.list"),this.hasMod("active")||this.select(null))}}},{mods:"focus",live:{"focusin focusout":function(a){this["focusin"==a.type?"on":"off"]("focusin.list",function(a){a.target!==this.el&&(a=f(a.target).closest(this.s("__item")),a[0]&&this.select(a))})},"mouseenter mouseleave":function(a){"mouseleave"!=
a.type?(this.select(a.target),this.on("hover.list","__item","_onHover")):(this.off("hover.list"),this.select(null))}}})})(jQuery);
(function(f){var m=/input|select|textarea/i;f.bem(["b-control","b-dropdown"],{autoCollapse:!0,_init:function(){this[this.autoCollapse?"on":"F"]("selectitem","collapse").on("leftclick","__link","onFocusHotKey")},onFocusHotKey:function(d){(!d.isDefaultPrevented()||this.hasMod("expanded"))&&this.toggleMod("expanded")},onFocusHotKeyCheck:function(d){if(this.hasMod("expanded")&&m.test(d.target.tagName))return!1},collapse:function(){this.delMod("expanded")},onMod:{expanded:function(d){this[d?"on":"off"]("keyup.esc",
"_onKeyUpEsc").$css("__list",{zIndex:d?1500:""}).$aria({expanded:d}).elem("list").mod("active",d);this.trigger(d?"expand":"collapse")},disabled:function(d){d&&this.collapse()},focus_no:function(){this.collapse()},"*":function(d,a){var c=this.parent(d,a);!1!==c&&(a&&this.isDisabled())&&(c=!~"expanded".indexOf(d));!1!==c&&(this.elem("link").mod(d,a),"expanded"==d&&this.elem("list").mod(d,a));return c}},_onKeyUpEsc:function(d){27==d.keyCode&&this.collapse()}},{mods:"hover focus",cache:!0});f.bem(["b-list",
"b-dropdown__list"])})(jQuery);
(function(f,m){var d={findNodeByRegExp:function(a,c){var e;if(d.isText(a)&&c.test(a.nodeValue))e=a;else for(var f=a.childNodes,k=f.length;k--&&!(e=d.findNodeByRegExp(f[k],c)););return e},wrapText:function(a,c,d,j){var k;f.body.createTextRange?(k=f.body.createTextRange(),k.move("character",c),k.moveEnd(d),k.pasteHTML(j.outerHTML.replace("></",">"+k.text+"</"))):(k=f.createRange(),k.setStart(a,c),k.setEnd(a,c+d),k.surroundContents(j))},selectNode:function(a){var c=f.createRange();c.selectNode(a);return c},
isText:function(a){return a&&3==a.nodeType}};m.bem("b-filter",{bindAll:"_onFilter",searchType:"any",ceseSensitive:!1,_init:function(){var a=f.createElement("span");a.className=this._highlightClassName=this.s("__list__item__highlight",1);this._highlightNode=a},onMod:{focus:function(a){this[a?"on":"off"]("keydown.filter","__input","_onKeyDown")}},_onKeyDown:function(){clearTimeout(this._onFilterId);this._onFilterId=setTimeout(this._onFilter,150)},_getSearchRegExp:function(a){return a&&RegExp(("first"==
this.searchType?"^":"")+a,this.ceseSensitive?"":"i")},_onFilter:function(){for(var a=this.$("__input").val(),c=this._getSearchRegExp(a),d=this.$("__list").find(".js-filter-item"),f=0,k=d.length,l,p,u=this.s("__list__item_filtered",1);f<k;f+=1)p=(" "+(l=d[f]).className+" ").replace(" "+u+" "," "),l.__filtered&&(this.removeHighlight(l),l.__filtered=!1),a.length&&(l.__filtered=!0,this.filter(l,c,a)?this.highlight(l,c,a):p+=u),l.className=m.trim(p);this.trigger({type:"filter",value:a})},filter:function(a,
c){return c.test(a.textContent||a.innerText)},highlight:function(a,c,e){(a=d.findNodeByRegExp(a,c))&&d.wrapText(a,a.nodeValue.search(c),e.length,this._highlightNode.cloneNode(!0))},removeHighlight:function(a){for(var c=a.getElementsByTagName("span"),e=c.length;e--;)if(a=c[e],~a.className.indexOf(this._highlightClassName)){c=a.parentNode;c.insertBefore(a.firstChild,a);c.removeChild(a);a=c.firstChild;do if(e=a.nextSibling)d.isText(a)&&d.isText(e)?(a.nodeValue+=e.nodeValue,c.removeChild(e)):a=e;else break;
while(1);break}}},{mods:"focus"})})(document,jQuery);window.ajs&&ajs.loaded&&ajs.loaded("{jquery.bem}jquery.bem.min");"function"===typeof define&&define.amd&&define("jquery.bem",[],function(){return window["jquery.bem"]||{}});
